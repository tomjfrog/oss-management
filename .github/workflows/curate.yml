name: Curate an OSS Package

permissions:
  id-token: write

on:
  workflow_dispatch:

jobs:
  Curate-OSS-Package:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup JFrog CLI
        uses: jfrog/setup-jfrog-cli@v4
        id: setup-jfrog-cli
        env:
          JF_URL: ${{ vars.JF_URL }}
        with:
          oidc-provider-name: github-oidc-integration
          oidc-audience: jfrog-github

      - name: List Package Managers
        id: list-package-manager
        run: |
          echo $(npm --version)
          echo $(mvn --version)
          echo $(pip --version)
          echo $(docker --version)

      - name: Extract packageType and set output
        id: extract-package-type
        run: |
          packageType=$(jq -r '.packageType' < input/requested-packages.json)
          echo "packageType=$packageType" >> $GITHUB_OUTPUT

      - name: Validate
        id: validate
        run: |
          echo ${{ steps.extract-package-type.outputs.packageType }}
      

          
